# Task ID: 28
# Title: Create Comprehensive Permission Request System with Onboarding Flow
# Status: done
# Dependencies: 2, 3, 7, 8, 12
# Priority: high
# Description: Implement a complete permission request and onboarding system with Material 3 design that guides users through audio recording, overlay, and accessibility service permissions with clear explanations and visual guides.
# Details:
Create PermissionOnboardingActivity with ViewPager2 for multi-step onboarding flow. Implement OnboardingViewModel with permission state management using sealed class (Granted, Denied, NotRequested, PermanentlyDenied). Design Material 3 onboarding screens: Welcome screen with app overview, Audio Permission screen explaining speech-to-text functionality with microphone icon and sample waveform animation, Overlay Permission screen showing floating button preview with drag demonstration, Accessibility Service screen with step-by-step visual guide including screenshots of Android settings navigation. Create PermissionManager utility class handling runtime permissions and special permissions (SYSTEM_ALERT_WINDOW, accessibility service). Implement graceful degradation: show limited functionality screens when permissions denied, provide 'Try Again' and 'Settings' action buttons, display persistent notification for critical missing permissions. Add AccessibilitySetupGuideFragment with animated illustrations showing: Settings > Accessibility > WhisperTop > Enable toggle sequence. Create fallback mechanisms: clipboard-based text insertion when accessibility unavailable, toast notifications when overlay permission denied. Implement permission rationale dialogs with custom Material 3 design explaining why each permission is essential. Add smooth page transitions with shared element animations and progress indicators. Create PermissionStatusLiveData for reactive UI updates and proper lifecycle handling.

# Test Strategy:
Test permission request flows on various Android versions (API 26-35), verify onboarding completes successfully when all permissions granted, test graceful handling of denied permissions with appropriate fallback UI, verify accessibility service setup guide accuracy across different Android UI versions, test notification system for missing permissions, verify Material 3 theming consistency across all onboarding screens, test orientation changes during onboarding flow, verify proper navigation back/forward behavior, test permission state persistence across app restarts
